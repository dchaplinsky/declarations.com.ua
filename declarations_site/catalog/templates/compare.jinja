{% extends "base.jinja" %}
{% from "_search_results.jinja" import search_results with context %}

{% block bodyclass %}not-front compare-page{% endblock %}

{% block content %}

<section id="page">
    <div class="container">
        <div id="breadcrumbs">
            <ol class="breadcrumb">
                <li><a href="{{ url("wagtail_serve", "") }}">{{ _("Головна") }}</a></li>
                <li class="active">{{ _("Список порівнянь декларацій") }}</li>
            </ol>
        </div>

        <h1 class="page-header"><span>{{ _("Список порівнянь декларацій") }}</span></h1>

        <div class="page-content">
            {% if results %}
                <h2>{{ _("Декларації, що були використані для порівняння") }}</h2>
                <div class="search-page">
                    <div class="row list-group search-results">
                        {{ search_results(results) }}
                    </div>
                </div>

                <div class="comparedata-section">
                    <canvas id="decl_global" data-caption="{{ _("Доходи та грошові активи VS витрати та зобов'язання") }}"></canvas>
                </div>

                <div class="comparedata-section">
                    <canvas id="decl_incomes" data-caption="{{ _("Дохід декларанта, родини та загальна сума подарунків") }}"></canvas>
                </div>

                <div class="comparedata-section">
                    <canvas id="decl_assets" data-caption="{{ _("Грошові активи декларанта, родини та загальна сума готівки") }}"></canvas>
                </div>

                <div class="comparedata-section">
                    <canvas id="decl_realty" data-caption="{{ _("Квартири, будинки, та інша нерухомість (м²)") }}"></canvas>
                </div>

                <div class="comparedata-section">
                    <canvas id="decl_land" data-caption="{{ _("Земельні ділянки (м²)") }}"></canvas>
                </div>

                <div class="comparedata-section">
                    <canvas id="decl_cars" data-caption="{{ _("Машини та інші транспортні засоби") }}"></canvas>
                </div>
            {% endif %}

        {% block static_content %}
        {% endblock %}
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
    {% if results %}
        <script type="text/javascript">
            window.incomes_data = {{ incomes_data|safe }};
            window.assets_data = {{ assets_data|safe }};
            window.incomes_vs_expenses_data = {{ incomes_vs_expenses_data|safe }};
            window.land_data = {{ land_data|safe }};
            window.realty_data = {{ realty_data|safe }};
            window.cars_data = {{ cars_data|safe }};
            window.urls = {{ urls|safe }};
        </script>

        {% javascript 'js_charts' %}
    {% else %}
        <script type="text/javascript">
            $(function() {
                $('.decl-compare-modal').modal('show');
            });
        </script>
    {% endif %}
{% endblock %}